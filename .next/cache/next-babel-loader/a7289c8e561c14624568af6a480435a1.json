{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\personal\\\\Project\\\\our-college-tree\\\\components\\\\user\\\\Login.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport Link from 'next/link';\nimport Router, { withRouter } from 'next/router';\nimport { connect } from 'react-redux';\nimport Axios from 'axios';\nimport { Image, Grid, Container, Input, Header, Divider, Form, Message } from 'semantic-ui-react';\nimport Api from '../../config/Api';\nimport { updateUser } from './LoginSlice';\nimport { setCookie } from '../../libs/cookies/cookieHelpers';\n\nvar Login = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(Login, _React$PureComponent);\n\n  var _super = _createSuper(Login);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (e) {\n      var _this$setState;\n\n      var _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n      var nameErrors = \"\".concat(name, \"Errors\");\n\n      _this.setState((_this$setState = {}, _defineProperty(_this$setState, name, value), _defineProperty(_this$setState, nameErrors, []), _defineProperty(_this$setState, \"errors\", []), _this$setState));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", function () {\n      var _this$state = _this.state,\n          username = _this$state.username,\n          password = _this$state.password;\n      var _this$props$router = _this.props.router,\n          query = _this$props$router.query,\n          next = _this$props$router.query.next;\n      var updateUserAction = _this.props.updateUser;\n\n      _this.setState({\n        isLoading: true\n      });\n\n      Axios.post(Api.userLogin, {\n        username: username,\n        password: password\n      }).then(function (_ref) {\n        var _ref$data = _ref.data,\n            key = _ref$data.key,\n            details = _ref$data.details;\n        console.log(\"key\", key);\n        setCookie(key);\n        updateUserAction({\n          isLoggedIn: true,\n          accessToken: key,\n          userDetails: details\n        });\n        Router.push('/');\n      })[\"catch\"](function (_ref2) {\n        var response = _ref2.response,\n            _ref2$response = _ref2.response,\n            data = _ref2$response.data,\n            status = _ref2$response.status,\n            statusText = _ref2$response.statusText;\n        console.log(\"login error\", response);\n      })[\"finally\"](function () {\n        _this.setState({\n          isLoading: false\n        });\n      });\n    });\n\n    _this.state = {\n      isLoading: false,\n      username: '',\n      usernameErrors: [],\n      password: '',\n      passwordErrors: [],\n      errors: []\n    };\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          isLoading = _this$state2.isLoading,\n          username = _this$state2.username,\n          password = _this$state2.password,\n          usernameErrors = _this$state2.usernameErrors,\n          passwordErrors = _this$state2.passwordErrors,\n          errors = _this$state2.errors;\n      return __jsx(\"div\", {\n        className: \"loginSignup\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 5\n        }\n      }, __jsx(\"div\", {\n        style: {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          bottom: 0,\n          right: 0\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }\n      }, __jsx(\"div\", {\n        style: {\n          width: '100%',\n          \"float\": 'right',\n          height: '100%',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }\n      }, __jsx(Grid, {\n        centered: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 20\n        }\n      }, __jsx(Grid.Row, {\n        verticalAlign: \"middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }\n      }, __jsx(Grid.Column, {\n        mobile: 16,\n        tablet: 8,\n        computer: 16,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }\n      }, __jsx(Header, {\n        color: \"yellow\",\n        as: \"h1\",\n        textAlign: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 15\n        }\n      }, \"Login\"), __jsx(Form, {\n        onSubmit: this.onSubmit,\n        error: errors.length > 0,\n        loading: isLoading,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }\n      }, __jsx(Form.Field, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 17\n        }\n      }, __jsx(\"lable\", {\n        style: {\n          color: \"yellow\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }\n      }, \"Username\"), __jsx(Input, {\n        name: \"username\",\n        type: \"text\",\n        placeholder: \"Username\",\n        onChange: this.onChange,\n        value: username,\n        error: usernameErrors.length ? usernameErrors.join() : null,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 70\n        }\n      })), __jsx(Form.Field, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 17\n        }\n      }, __jsx(\"lable\", {\n        style: {\n          color: \"yellow\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 17\n        }\n      }, \"Password\"), __jsx(Input, {\n        name: \"password\",\n        type: \"password\",\n        placeholder: \"Password\",\n        onChange: this.onChange,\n        value: password,\n        error: passwordErrors.length ? passwordErrors.join() : null,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }\n      })), __jsx(Message, {\n        hidden: !errors.length,\n        error: true,\n        list: errors,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }\n      }), __jsx(Form.Button, {\n        content: \"Log In\",\n        positive: true,\n        fluid: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 17\n        }\n      })))), __jsx(Grid.Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }\n      }, __jsx(Grid.Column, {\n        mobile: 16,\n        tablet: 8,\n        computer: 8,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }\n      }, __jsx(Divider, {\n        horizontal: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 15\n        }\n      }, __jsx(\"p\", {\n        style: {\n          color: \"white\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 35\n        }\n      }, \"Or\")), __jsx(Grid, {\n        columns: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 15\n        }\n      }, __jsx(Grid.Column, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 17\n        }\n      }, __jsx(Header, {\n        as: \"h5\",\n        textAlign: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 19\n        }\n      }, __jsx(Link, {\n        href: \"/user/forgot-password\",\n        passHref: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }\n      }, __jsx(\"a\", {\n        title: \"Forgot Password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 65\n        }\n      }, \"Forgot Password?\")))))))))));\n    }\n  }]);\n\n  return Login;\n}(React.PureComponent);\n\nvar mapStateToProps = null;\nvar mapDispatchToProps = {\n  updateUser: updateUser\n};\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Login));","map":{"version":3,"sources":["D:/personal/Project/our-college-tree/components/user/Login.js"],"names":["React","Link","Router","withRouter","connect","Axios","Image","Grid","Container","Input","Header","Divider","Form","Message","Api","updateUser","setCookie","Login","props","e","target","name","value","nameErrors","setState","state","username","password","router","query","next","updateUserAction","isLoading","post","userLogin","then","data","key","details","console","log","isLoggedIn","accessToken","userDetails","push","response","status","statusText","usernameErrors","passwordErrors","errors","position","top","left","bottom","right","width","height","display","alignItems","justifyContent","onSubmit","length","color","onChange","join","PureComponent","mapStateToProps","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Link from 'next/link';\r\nimport Router, { withRouter } from 'next/router';\r\nimport { connect } from 'react-redux';\r\nimport Axios from 'axios';\r\nimport {\r\n  Image, Grid, Container, Input, Header, Divider, Form, Message,\r\n} from 'semantic-ui-react';\r\n\r\nimport Api from '../../config/Api';\r\n import { updateUser } from './LoginSlice';\r\n import { setCookie } from '../../libs/cookies/cookieHelpers';\r\n\r\n\r\nclass Login extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoading: false,\r\n      username: '',\r\n      usernameErrors: [],\r\n      password: '',\r\n      passwordErrors: [],\r\n      errors: [],\r\n    };\r\n  }\r\n\r\n  onChange = (e) => {\r\n    const { name, value } = e.target;\r\n    const nameErrors = `${name}Errors`;\r\n    this.setState({ [name]: value, [nameErrors]: [], errors: [] });\r\n  }\r\n\r\n  onSubmit = () => {\r\n    const { username, password } = this.state;\r\n    const { router: { query, query: { next } } } = this.props;\r\n    const { updateUser: updateUserAction } = this.props;\r\n    this.setState({ isLoading: true });\r\n    Axios.post(Api.userLogin, { username, password })\r\n      .then(({ data: { key, details } }) => {\r\n          console.log(\"key\", key)   \r\n        setCookie(key);\r\n        updateUserAction({ isLoggedIn: true, accessToken: key, userDetails: details });\r\n        Router.push('/');\r\n      })\r\n      .catch(({ response, response: { data, status, statusText } }) => {\r\n        console.log(\"login error\", response)})\r\n      .finally(() => { this.setState({ isLoading: false }); });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      isLoading, username, password, usernameErrors, passwordErrors, errors,\r\n    } = this.state;\r\n\r\n    return (\r\n    <div className=\"loginSignup\">\r\n          <div style={{\r\n            position: 'absolute', top: 0, left: 0, bottom: 0, right: 0,\r\n          }}\r\n          >\r\n            <div style={{\r\n              width: '100%', float: 'right', height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n            }}\r\n            >\r\n                   <Grid centered>\r\n          <Grid.Row verticalAlign=\"middle\">\r\n            <Grid.Column mobile={16} tablet={8} computer={16}>\r\n              <Header color=\"yellow\" as=\"h1\" textAlign=\"center\">Login</Header>\r\n              <Form onSubmit={this.onSubmit} error={errors.length > 0} loading={isLoading}>\r\n                <Form.Field>\r\n                    <lable style={{color: \"yellow\"}}>Username</lable><Input name=\"username\" type=\"text\" placeholder=\"Username\" onChange={this.onChange} value={username} error={usernameErrors.length ? usernameErrors.join() : null} /></Form.Field>\r\n                <Form.Field>\r\n                <lable style={{color: \"yellow\"}}>Password</lable>\r\n                    <Input name=\"password\" type=\"password\" placeholder=\"Password\" onChange={this.onChange} value={password} error={passwordErrors.length ? passwordErrors.join() : null} /></Form.Field>\r\n                <Message hidden={!errors.length} error list={errors} />\r\n                <Form.Button content=\"Log In\" positive fluid></Form.Button>\r\n              </Form>\r\n            </Grid.Column>\r\n          </Grid.Row>\r\n          <Grid.Row>\r\n            <Grid.Column mobile={16} tablet={8} computer={8}>\r\n              <Divider horizontal><p style={{color: \"white\"}}>Or</p></Divider>\r\n              <Grid columns={1}>\r\n                <Grid.Column>\r\n                  <Header as=\"h5\" textAlign=\"center\">\r\n                    <Link href=\"/user/forgot-password\" passHref><a title=\"Forgot Password\">Forgot Password?</a></Link>\r\n                  </Header>\r\n                </Grid.Column>\r\n              </Grid>\r\n            </Grid.Column>\r\n          </Grid.Row>\r\n        </Grid>\r\n            </div>\r\n            </div>\r\n            </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = null;\r\nconst mapDispatchToProps = { \r\n    updateUser\r\n };\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Login));\r\n"]},"metadata":{},"sourceType":"module"}